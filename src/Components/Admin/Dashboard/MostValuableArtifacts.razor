@namespace mims.Components.Admin.Dashboard
@rendermode InteractiveServer

@using mims.Models
@using mims.Services.Interfaces
@inject IArtifactService ArtifactService

<Card Color="CardColor.Info" Class="mb-4" Style="width:30rem;">
    <CardBody>
        <CardTitle>Most Valuable Artifacts: </CardTitle>
    </CardBody>
    <ul class="list-group list-group-flush">
        @if (isLoading)
        {
            <li class="list-group-item">Loading...</li>
        }
        else if (Artifacts == null || !Artifacts.Any())
        {
            <li class="list-group-item">No artifacts found !!</li>
        }
        else
        {
            foreach (var artifact in Artifacts)
            {
                <li class="list-group-item">@artifact.Name</li>
            }
        }
    </ul>
</Card>


@code {
    IEnumerable<Artifact> Artifacts;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        int noOfRecords = 4;
        Artifacts = await ArtifactService.GetRecentlyAddedArtifacts(noOfRecords);
        isLoading = false;
    }
}